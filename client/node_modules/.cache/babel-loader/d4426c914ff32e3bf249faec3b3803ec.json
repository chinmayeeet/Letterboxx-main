{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Letterboxx-main\\\\client\\\\src\\\\MovieInfo.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Jumbotron, Container, Button, Col, Row, Input, Form } from 'reactstrap';\nimport './App.css';\nimport { Posts } from './Posts';\nimport { FaStar } from 'react-icons/fa';\n\nconst ReviewTag = ({\n  user\n}) => {\n  return !user ? /*#__PURE__*/_jsxDEV(\"p\", {\n    children: /*#__PURE__*/_jsxDEV(\"em\", {\n      children: \"write a review as @anonymous\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 23\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 20\n  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n    children: /*#__PURE__*/_jsxDEV(\"em\", {\n      children: [\"What does \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: user.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 9,\n        columnNumber: 84\n      }, this), \" think? \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 70\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 67\n  }, this);\n};\n\n_c = ReviewTag;\nexport default class MovieInfo extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      userReview: '',\n      title: '',\n      stars: 0,\n      movie: [],\n      cast: [],\n      posts: [],\n      isSubmitted: 0\n    };\n    this.revChange = this.revChange.bind(this);\n    this.revSubmit = this.revSubmit.bind(this);\n    this.starHandler = this.starHandler.bind(this);\n  }\n\n  starHandler(e) {\n    this.setState({\n      stars: e.target.value\n    });\n  }\n\n  revChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n    console.log(e.target.value);\n  }\n\n  resetForm(e) {\n    e.target.resetFields();\n  }\n\n  revSubmit(e) {\n    e.preventDefault();\n    const postRev = {\n      movie: this.state.movie.name,\n      movieId: this.props.match.params.id,\n      username: this.props.user ? this.props.user.username.slice(1) : 'anonymous',\n      title: this.state.title,\n      body: this.state.userReview,\n      stars: this.state.stars\n    }; //post the review to \n    // 1. api/posts (post)\n    // 2. api/users : reviews (append) (put)\n    // 3. api/movies : reviews (append) (put)\n\n    try {\n      axios.post('http://localhost:5000/api/posts/', postRev).then(res => {\n        this.setState({\n          isSubmitted: this.state.isSubmitted + 1\n        });\n      });\n    } catch {\n      this.setState({\n        error: 'something went wrong'\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.isSubmitted != this.state.isSubmitted) {\n      axios.get('http://localhost:5000/api/posts/movie/' + this.props.match.params.id).then(res => {\n        this.setState({\n          isLoaded: true,\n          posts: res.data\n        });\n      });\n    }\n  }\n\n  componentDidMount() {\n    // GET movie to be loaded (mrouter)\n    axios.get('http://localhost:5000/api/movies/movie/' + this.props.match.params.id).then(res => {\n      this.setState({\n        isLoaded: true,\n        movie: res.data\n      });\n    }); // GET Posts for the movie (prouter)\n\n    axios.get('http://localhost:5000/api/posts/movie/' + this.props.match.params.id).then(res => {\n      this.setState({\n        isLoaded: true,\n        posts: res.data\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"130px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Jumbotron, {\n        children: [/*#__PURE__*/_jsxDEV(Container, {\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              sm: \"4\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                style: {\n                  padding: \"10px\",\n                  paddingTop: \"0px\",\n                  borderRadius: \"10%\"\n                },\n                src: this.state.movie.postersrc,\n                alt: this.state.movie.name,\n                width: \"100%\",\n                height: \"480px\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  opacity: \"0.7\",\n                  fontFamily: \"monospace\",\n                  textAlign: \"center\"\n                },\n                children: this.state.movie.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(Container, {\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  style: {\n                    padding: \"10px\"\n                  },\n                  children: [this.state.movie.name, \" (\", this.state.movie.year, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    padding: \"20px\",\n                    backgroundColor: \"pink\",\n                    borderRadius: \"10px\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: [\"Directed by \", this.state.movie.director, \" | \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-primary\",\n                      children: this.state.movie.genre\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 113,\n                      columnNumber: 87\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: \"grid\",\n                      gridTemplateColumns: \"auto auto\"\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                      children: this.state.movie.cast\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 115,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 114,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(ReviewTag, {\n                    user: this.props.user\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Form, {\n                    onSubmit: this.resetForm,\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        padding: \"10px\",\n                        justifyContent: \"right\",\n                        width: \"100%\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"radio\",\n                          value: 1,\n                          onClick: e => this.setState({\n                            stars: 1\n                          }),\n                          style: {\n                            display: \"none\"\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 121,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(FaStar, {\n                          size: 20,\n                          className: \"star\",\n                          style: {\n                            margin: \"10px\",\n                            marginBottom: \"auto\"\n                          },\n                          color: this.state.stars >= 1 ? 'orangered' : 'e4e5e9'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 122,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 120,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"radio\",\n                          value: 1,\n                          onClick: e => this.setState({\n                            stars: 2\n                          }),\n                          style: {\n                            display: \"none\"\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 126,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(FaStar, {\n                          size: 20,\n                          className: \"star\",\n                          style: {\n                            margin: \"10px\",\n                            marginBottom: \"auto\"\n                          },\n                          color: this.state.stars >= 2 ? 'orangered' : 'e4e5e9'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 127,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 125,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"radio\",\n                          value: 1,\n                          onClick: e => this.setState({\n                            stars: 3\n                          }),\n                          style: {\n                            display: \"none\"\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 131,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(FaStar, {\n                          size: 20,\n                          className: \"star\",\n                          style: {\n                            margin: \"10px\",\n                            marginBottom: \"auto\"\n                          },\n                          color: this.state.stars >= 3 ? 'orangered' : 'e4e5e9'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 132,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 130,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"radio\",\n                          value: 1,\n                          onClick: e => this.setState({\n                            stars: 4\n                          }),\n                          style: {\n                            display: \"none\"\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 136,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(FaStar, {\n                          size: 20,\n                          className: \"star\",\n                          style: {\n                            margin: \"10px\",\n                            marginBottom: \"auto\"\n                          },\n                          color: this.state.stars >= 4 ? 'orangered' : 'e4e5e9'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 137,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 135,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"radio\",\n                          value: 1,\n                          onClick: e => this.setState({\n                            stars: 5\n                          }),\n                          style: {\n                            display: \"none\"\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 141,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(FaStar, {\n                          size: 20,\n                          className: \"star\",\n                          style: {\n                            margin: \"10px\",\n                            marginBottom: \"auto\"\n                          },\n                          color: this.state.stars >= 5 ? 'orangered' : 'e4e5e9'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 142,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 140,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 119,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Input, {\n                      type: \"text\",\n                      value: this.state.title,\n                      name: \"title\",\n                      placeholder: \"Title\",\n                      onChange: this.revChange,\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 146,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Input, {\n                      type: \"textarea\",\n                      style: {\n                        width: \"100%\",\n                        height: \"150px\"\n                      },\n                      placeholder: \"Write your review here ... \",\n                      value: this.state.userReview,\n                      name: \"userReview\",\n                      onChange: this.revChange,\n                      rows: 5,\n                      cols: 50,\n                      maxLength: 140,\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 148,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: this.revSubmit,\n                      className: \"btn mt-4 btn-success\",\n                      children: \"Publish!\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 149,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"grid\",\n            gridTemplateColumns: \"50% 50%\",\n            paddingBottom: \"20px\",\n            paddingTop: \"20px\",\n            width: \"100%\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Posts, {\n            items: this.state.posts\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"ReviewTag\");","map":{"version":3,"sources":["C:/Letterboxx-main/client/src/MovieInfo.js"],"names":["React","Component","axios","Jumbotron","Container","Button","Col","Row","Input","Form","Posts","FaStar","ReviewTag","user","username","MovieInfo","constructor","props","state","isLoaded","userReview","title","stars","movie","cast","posts","isSubmitted","revChange","bind","revSubmit","starHandler","e","setState","target","value","name","console","log","resetForm","resetFields","preventDefault","postRev","movieId","match","params","id","slice","body","post","then","res","error","componentDidUpdate","prevProps","prevState","get","data","componentDidMount","render","margin","padding","paddingTop","borderRadius","postersrc","opacity","fontFamily","textAlign","year","backgroundColor","director","genre","display","gridTemplateColumns","justifyContent","width","marginBottom","height","paddingBottom"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,SAApB,EAA+BC,MAA/B,EAAuCC,GAAvC,EAA4CC,GAA5C,EAAiDC,KAAjD,EAAwDC,IAAxD,QAAoE,YAApE;AACA,OAAO,WAAP;AACA,SAASC,KAAT,QAAsB,SAAtB;AACA,SAASC,MAAT,QAAuB,gBAAvB;;AAEA,MAAMC,SAAS,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAa;AAC3B,SAAO,CAACA,IAAD,gBAAQ;AAAA,2BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA,UAAR,gBAAuD;AAAA,2BAAG;AAAA,4CAAc;AAAA,kBAAIA,IAAI,CAACC;AAAT;AAAA;AAAA;AAAA;AAAA,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA,UAA9D;AACH,CAFD;;KAAMF,S;AAIN,eAAe,MAAMG,SAAN,SAAwBd,SAAxB,CAAiC;AAC5Ce,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,QAAQ,EAAE,KADD;AAETC,MAAAA,UAAU,EAAE,EAFH;AAGTC,MAAAA,KAAK,EAAE,EAHE;AAITC,MAAAA,KAAK,EAAE,CAJE;AAKTC,MAAAA,KAAK,EAAE,EALE;AAMTC,MAAAA,IAAI,EAAC,EANI;AAOTC,MAAAA,KAAK,EAAE,EAPE;AAQTC,MAAAA,WAAW,EAAE;AARJ,KAAb;AAUA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeD,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKE,WAAL,GAAmB,KAAKA,WAAL,CAAiBF,IAAjB,CAAsB,IAAtB,CAAnB;AACH;;AACDE,EAAAA,WAAW,CAACC,CAAD,EAAG;AACV,SAAKC,QAAL,CAAc;AACVV,MAAAA,KAAK,EAAES,CAAC,CAACE,MAAF,CAASC;AADN,KAAd;AAGH;;AACDP,EAAAA,SAAS,CAACI,CAAD,EAAG;AACR,SAAKC,QAAL,CAAc;AACV,OAACD,CAAC,CAACE,MAAF,CAASE,IAAV,GAAiBJ,CAAC,CAACE,MAAF,CAASC;AADhB,KAAd;AAGAE,IAAAA,OAAO,CAACC,GAAR,CAAYN,CAAC,CAACE,MAAF,CAASC,KAArB;AACH;;AACDI,EAAAA,SAAS,CAACP,CAAD,EAAG;AACRA,IAAAA,CAAC,CAACE,MAAF,CAASM,WAAT;AACH;;AACDV,EAAAA,SAAS,CAACE,CAAD,EAAG;AACRA,IAAAA,CAAC,CAACS,cAAF;AACA,UAAMC,OAAO,GAAG;AACZlB,MAAAA,KAAK,EAAC,KAAKL,KAAL,CAAWK,KAAX,CAAiBY,IADX;AAEZO,MAAAA,OAAO,EAAE,KAAKzB,KAAL,CAAW0B,KAAX,CAAiBC,MAAjB,CAAwBC,EAFrB;AAGZ/B,MAAAA,QAAQ,EAAE,KAAKG,KAAL,CAAWJ,IAAX,GAAkB,KAAKI,KAAL,CAAWJ,IAAX,CAAgBC,QAAhB,CAAyBgC,KAAzB,CAA+B,CAA/B,CAAlB,GAAsD,WAHpD;AAIZzB,MAAAA,KAAK,EAAE,KAAKH,KAAL,CAAWG,KAJN;AAKZ0B,MAAAA,IAAI,EAAE,KAAK7B,KAAL,CAAWE,UALL;AAMZE,MAAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWI;AANN,KAAhB,CAFQ,CAUR;AACA;AACA;AACA;;AACA,QAAG;AACCpB,MAAAA,KAAK,CAAC8C,IAAN,CAAW,kCAAX,EAA+CP,OAA/C,EAAwDQ,IAAxD,CAA6DC,GAAG,IAAI;AAChE,aAAKlB,QAAL,CAAc;AACVN,UAAAA,WAAW,EAAE,KAAKR,KAAL,CAAWQ,WAAX,GAAyB;AAD5B,SAAd;AAGH,OAJD;AAKH,KAND,CAME,MAAM;AACJ,WAAKM,QAAL,CAAc;AACVmB,QAAAA,KAAK,EAAC;AADI,OAAd;AAGH;AACJ;;AACDC,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAsB;AACpC,QAAGA,SAAS,CAAC5B,WAAV,IAAyB,KAAKR,KAAL,CAAWQ,WAAvC,EAAmD;AAC/CxB,MAAAA,KAAK,CAACqD,GAAN,CAAU,2CAAyC,KAAKtC,KAAL,CAAW0B,KAAX,CAAiBC,MAAjB,CAAwBC,EAA3E,EAA+EI,IAA/E,CAAoFC,GAAG,IAAI;AACvF,aAAKlB,QAAL,CAAc;AACVb,UAAAA,QAAQ,EAAC,IADC;AAEVM,UAAAA,KAAK,EAAEyB,GAAG,CAACM;AAFD,SAAd;AAIH,OALD;AAMH;AACJ;;AACDC,EAAAA,iBAAiB,GAAE;AAEf;AACAvD,IAAAA,KAAK,CAACqD,GAAN,CAAU,4CAA0C,KAAKtC,KAAL,CAAW0B,KAAX,CAAiBC,MAAjB,CAAwBC,EAA5E,EAAgFI,IAAhF,CAAqFC,GAAG,IAAI;AACxF,WAAKlB,QAAL,CAAc;AACVb,QAAAA,QAAQ,EAAE,IADA;AAEVI,QAAAA,KAAK,EAAE2B,GAAG,CAACM;AAFD,OAAd;AAIH,KALD,EAHe,CAUf;;AACAtD,IAAAA,KAAK,CAACqD,GAAN,CAAU,2CAAyC,KAAKtC,KAAL,CAAW0B,KAAX,CAAiBC,MAAjB,CAAwBC,EAA3E,EAA+EI,IAA/E,CAAoFC,GAAG,IAAI;AACvF,WAAKlB,QAAL,CAAc;AACVb,QAAAA,QAAQ,EAAC,IADC;AAEVM,QAAAA,KAAK,EAAEyB,GAAG,CAACM;AAFD,OAAd;AAIH,KALD;AAOH;;AACDE,EAAAA,MAAM,GAAE;AACJ,wBACI;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,MAAM,EAAC;AAAR,OAAZ;AAAA,6BACI,QAAC,SAAD;AAAA,gCACI,QAAC,SAAD;AAAA,iCACI,QAAC,GAAD;AAAA,oCACI,QAAC,GAAD;AAAK,cAAA,EAAE,EAAC,GAAR;AAAA,sCACI;AAAK,gBAAA,KAAK,EAAE;AAACC,kBAAAA,OAAO,EAAC,MAAT;AAAiBC,kBAAAA,UAAU,EAAC,KAA5B;AAAmCC,kBAAAA,YAAY,EAAC;AAAhD,iBAAZ;AAAoE,gBAAA,GAAG,EAAI,KAAK5C,KAAL,CAAWK,KAAX,CAAiBwC,SAA5F;AAAwG,gBAAA,GAAG,EAAI,KAAK7C,KAAL,CAAWK,KAAX,CAAiBY,IAAhI;AAAsI,gBAAA,KAAK,EAAG,MAA9I;AAAqJ,gBAAA,MAAM,EAAG;AAA9J;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAG,gBAAA,KAAK,EAAE;AAAE6B,kBAAAA,OAAO,EAAC,KAAV;AAAiBC,kBAAAA,UAAU,EAAC,WAA5B;AAAyCC,kBAAAA,SAAS,EAAC;AAAnD,iBAAV;AAAA,0BAAyE,KAAKhD,KAAL,CAAWK,KAAX,CAAiBY;AAA1F;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAKI,QAAC,GAAD;AAAA,qCACI,QAAC,SAAD;AAAA,wCACI;AAAI,kBAAA,KAAK,EAAE;AAACyB,oBAAAA,OAAO,EAAC;AAAT,mBAAX;AAAA,6BAA8B,KAAK1C,KAAL,CAAWK,KAAX,CAAiBY,IAA/C,QAAuD,KAAKjB,KAAL,CAAWK,KAAX,CAAiB4C,IAAxE;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI;AAAA;AAAA;AAAA;AAAA,wBAFJ,eAGI;AAAK,kBAAA,KAAK,EAAE;AAACP,oBAAAA,OAAO,EAAC,MAAT;AAAiBQ,oBAAAA,eAAe,EAAC,MAAjC;AAAyCN,oBAAAA,YAAY,EAAC;AAAtD,mBAAZ;AAAA,0CACI;AAAA,+CAAiB,KAAK5C,KAAL,CAAWK,KAAX,CAAiB8C,QAAlC,sBAA8C;AAAM,sBAAA,SAAS,EAAC,cAAhB;AAAA,gCAAgC,KAAKnD,KAAL,CAAWK,KAAX,CAAiB+C;AAAjD;AAAA;AAAA;AAAA;AAAA,4BAA9C;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,eAEI;AAAK,oBAAA,KAAK,EAAE;AAACC,sBAAAA,OAAO,EAAC,MAAT;AAAiBC,sBAAAA,mBAAmB,EAAC;AAArC,qBAAZ;AAAA,2CACI;AAAA,gCAAK,KAAKtD,KAAL,CAAWK,KAAX,CAAiBC;AAAtB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,0BAFJ,eAKI,QAAC,SAAD;AAAW,oBAAA,IAAI,EAAE,KAAKP,KAAL,CAAWJ;AAA5B;AAAA;AAAA;AAAA;AAAA,0BALJ,eAMI,QAAC,IAAD;AAAM,oBAAA,QAAQ,EAAE,KAAKyB,SAArB;AAAA,4CACI;AAAK,sBAAA,KAAK,EAAE;AAACsB,wBAAAA,OAAO,EAAC,MAAT;AAAiBa,wBAAAA,cAAc,EAAC,OAAhC;AAAyCC,wBAAAA,KAAK,EAAC;AAA/C,uBAAZ;AAAA,8CACI;AAAA,gDACI;AAAO,0BAAA,IAAI,EAAC,OAAZ;AAAoB,0BAAA,KAAK,EAAE,CAA3B;AAA8B,0BAAA,OAAO,EAAG3C,CAAD,IAAK,KAAKC,QAAL,CAAc;AAACV,4BAAAA,KAAK,EAAE;AAAR,2BAAd,CAA5C;AAAuE,0BAAA,KAAK,EAAE;AAACiD,4BAAAA,OAAO,EAAC;AAAT;AAA9E;AAAA;AAAA;AAAA;AAAA,gCADJ,eAEI,QAAC,MAAD;AAAQ,0BAAA,IAAI,EAAE,EAAd;AAAkB,0BAAA,SAAS,EAAC,MAA5B;AAAmC,0BAAA,KAAK,EAAE;AAACZ,4BAAAA,MAAM,EAAC,MAAR;AAAgBgB,4BAAAA,YAAY,EAAC;AAA7B,2BAA1C;AACI,0BAAA,KAAK,EAAG,KAAKzD,KAAL,CAAWI,KAAX,IAAoB,CAApB,GAAwB,WAAxB,GAAsC;AADlD;AAAA;AAAA;AAAA;AAAA,gCAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,8BADJ,eAMI;AAAA,gDACI;AAAO,0BAAA,IAAI,EAAC,OAAZ;AAAoB,0BAAA,KAAK,EAAE,CAA3B;AAA8B,0BAAA,OAAO,EAAGS,CAAD,IAAK,KAAKC,QAAL,CAAc;AAACV,4BAAAA,KAAK,EAAE;AAAR,2BAAd,CAA5C;AAAuE,0BAAA,KAAK,EAAE;AAACiD,4BAAAA,OAAO,EAAC;AAAT;AAA9E;AAAA;AAAA;AAAA;AAAA,gCADJ,eAEI,QAAC,MAAD;AAAQ,0BAAA,IAAI,EAAE,EAAd;AAAkB,0BAAA,SAAS,EAAC,MAA5B;AAAmC,0BAAA,KAAK,EAAE;AAACZ,4BAAAA,MAAM,EAAC,MAAR;AAAgBgB,4BAAAA,YAAY,EAAC;AAA7B,2BAA1C;AACI,0BAAA,KAAK,EAAG,KAAKzD,KAAL,CAAWI,KAAX,IAAoB,CAApB,GAAwB,WAAxB,GAAsC;AADlD;AAAA;AAAA;AAAA;AAAA,gCAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,8BANJ,eAWI;AAAA,gDACI;AAAO,0BAAA,IAAI,EAAC,OAAZ;AAAoB,0BAAA,KAAK,EAAE,CAA3B;AAA8B,0BAAA,OAAO,EAAGS,CAAD,IAAK,KAAKC,QAAL,CAAc;AAACV,4BAAAA,KAAK,EAAE;AAAR,2BAAd,CAA5C;AAAuE,0BAAA,KAAK,EAAE;AAACiD,4BAAAA,OAAO,EAAC;AAAT;AAA9E;AAAA;AAAA;AAAA;AAAA,gCADJ,eAEI,QAAC,MAAD;AAAQ,0BAAA,IAAI,EAAE,EAAd;AAAkB,0BAAA,SAAS,EAAC,MAA5B;AAAmC,0BAAA,KAAK,EAAE;AAACZ,4BAAAA,MAAM,EAAC,MAAR;AAAgBgB,4BAAAA,YAAY,EAAC;AAA7B,2BAA1C;AACI,0BAAA,KAAK,EAAG,KAAKzD,KAAL,CAAWI,KAAX,IAAoB,CAApB,GAAwB,WAAxB,GAAsC;AADlD;AAAA;AAAA;AAAA;AAAA,gCAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,8BAXJ,eAgBI;AAAA,gDACI;AAAO,0BAAA,IAAI,EAAC,OAAZ;AAAoB,0BAAA,KAAK,EAAE,CAA3B;AAA8B,0BAAA,OAAO,EAAGS,CAAD,IAAK,KAAKC,QAAL,CAAc;AAACV,4BAAAA,KAAK,EAAE;AAAR,2BAAd,CAA5C;AAAuE,0BAAA,KAAK,EAAE;AAACiD,4BAAAA,OAAO,EAAC;AAAT;AAA9E;AAAA;AAAA;AAAA;AAAA,gCADJ,eAEI,QAAC,MAAD;AAAQ,0BAAA,IAAI,EAAE,EAAd;AAAkB,0BAAA,SAAS,EAAC,MAA5B;AAAmC,0BAAA,KAAK,EAAE;AAACZ,4BAAAA,MAAM,EAAC,MAAR;AAAgBgB,4BAAAA,YAAY,EAAC;AAA7B,2BAA1C;AACI,0BAAA,KAAK,EAAG,KAAKzD,KAAL,CAAWI,KAAX,IAAoB,CAApB,GAAwB,WAAxB,GAAsC;AADlD;AAAA;AAAA;AAAA;AAAA,gCAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,8BAhBJ,eAqBI;AAAA,gDACI;AAAO,0BAAA,IAAI,EAAC,OAAZ;AAAoB,0BAAA,KAAK,EAAE,CAA3B;AAA8B,0BAAA,OAAO,EAAGS,CAAD,IAAK,KAAKC,QAAL,CAAc;AAACV,4BAAAA,KAAK,EAAE;AAAR,2BAAd,CAA5C;AAAuE,0BAAA,KAAK,EAAE;AAACiD,4BAAAA,OAAO,EAAC;AAAT;AAA9E;AAAA;AAAA;AAAA;AAAA,gCADJ,eAEI,QAAC,MAAD;AAAQ,0BAAA,IAAI,EAAE,EAAd;AAAkB,0BAAA,SAAS,EAAC,MAA5B;AAAmC,0BAAA,KAAK,EAAE;AAACZ,4BAAAA,MAAM,EAAC,MAAR;AAAgBgB,4BAAAA,YAAY,EAAC;AAA7B,2BAA1C;AACI,0BAAA,KAAK,EAAG,KAAKzD,KAAL,CAAWI,KAAX,IAAoB,CAApB,GAAwB,WAAxB,GAAsC;AADlD;AAAA;AAAA;AAAA;AAAA,gCAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,8BArBJ;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,eA4BI,QAAC,KAAD;AAAO,sBAAA,IAAI,EAAC,MAAZ;AAAmB,sBAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWG,KAArC;AAA4C,sBAAA,IAAI,EAAC,OAAjD;AAAyD,sBAAA,WAAW,EAAC,OAArE;AAA6E,sBAAA,QAAQ,EAAE,KAAKM,SAA5F;AAAuG,sBAAA,QAAQ;AAA/G;AAAA;AAAA;AAAA;AAAA,4BA5BJ,eA6BI,QAAC,KAAD;AAAO,sBAAA,IAAI,EAAC,UAAZ;AAAuB,sBAAA,KAAK,EAAE;AAAC+C,wBAAAA,KAAK,EAAC,MAAP;AAAcE,wBAAAA,MAAM,EAAC;AAArB,uBAA9B;AAA6D,sBAAA,WAAW,EAAC,6BAAzE;AAAuG,sBAAA,KAAK,EAAI,KAAK1D,KAAL,CAAWE,UAA3H;AAAuI,sBAAA,IAAI,EAAC,YAA5I;AAAyJ,sBAAA,QAAQ,EAAI,KAAKO,SAA1K;AAAqL,sBAAA,IAAI,EAAI,CAA7L;AAAgM,sBAAA,IAAI,EAAI,EAAxM;AAA4M,sBAAA,SAAS,EAAI,GAAzN;AAA8N,sBAAA,QAAQ;AAAtO;AAAA;AAAA;AAAA;AAAA,4BA7BJ,eA8BI;AAAA;AAAA;AAAA;AAAA,4BA9BJ,eA+BI,QAAC,MAAD;AAAQ,sBAAA,OAAO,EAAE,KAAKE,SAAtB;AAAiC,sBAAA,SAAS,EAAC,sBAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BA/BJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BANJ;AAAA;AAAA;AAAA;AAAA;AAAA,wBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eAuDI;AAAK,UAAA,KAAK,EAAE;AAAE0C,YAAAA,OAAO,EAAC,MAAV;AAAkBC,YAAAA,mBAAmB,EAAC,SAAtC;AAAiDK,YAAAA,aAAa,EAAC,MAA/D;AAAuEhB,YAAAA,UAAU,EAAC,MAAlF;AAA0Fa,YAAAA,KAAK,EAAC;AAAhG,WAAZ;AAAA,iCACI,QAAC,KAAD;AAAO,YAAA,KAAK,EAAE,KAAKxD,KAAL,CAAWO;AAAzB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAvDJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ;AA+DH;;AAtJ2C","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { Jumbotron, Container, Button, Col, Row, Input, Form } from 'reactstrap'; \r\nimport './App.css';\r\nimport { Posts } from './Posts';\r\nimport { FaStar } from 'react-icons/fa';\r\n\r\nconst ReviewTag = ({ user }) =>{\r\n    return !user ? <p><em>write a review as @anonymous</em></p> : <p><em>What does <b>{user.username}</b> think? </em></p>\r\n}\r\n\r\nexport default class MovieInfo extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            isLoaded: false,\r\n            userReview: '',\r\n            title: '',\r\n            stars: 0,\r\n            movie: [],\r\n            cast:[],\r\n            posts: [],\r\n            isSubmitted: 0\r\n        }\r\n        this.revChange = this.revChange.bind(this);\r\n        this.revSubmit = this.revSubmit.bind(this);\r\n        this.starHandler = this.starHandler.bind(this);\r\n    }\r\n    starHandler(e){\r\n        this.setState({\r\n            stars: e.target.value\r\n        })\r\n    }\r\n    revChange(e){\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n        console.log(e.target.value);\r\n    }\r\n    resetForm(e){\r\n        e.target.resetFields();\r\n    }\r\n    revSubmit(e){\r\n        e.preventDefault();\r\n        const postRev = {\r\n            movie:this.state.movie.name,\r\n            movieId: this.props.match.params.id,\r\n            username: this.props.user ? this.props.user.username.slice(1) : 'anonymous',\r\n            title: this.state.title,\r\n            body: this.state.userReview,\r\n            stars: this.state.stars\r\n        }\r\n        //post the review to \r\n        // 1. api/posts (post)\r\n        // 2. api/users : reviews (append) (put)\r\n        // 3. api/movies : reviews (append) (put)\r\n        try{\r\n            axios.post('http://localhost:5000/api/posts/', postRev).then(res => {\r\n                this.setState({\r\n                    isSubmitted: this.state.isSubmitted + 1\r\n                })\r\n            })\r\n        } catch {\r\n            this.setState({\r\n                error:'something went wrong'\r\n            })\r\n        }\r\n    }\r\n    componentDidUpdate(prevProps, prevState){\r\n        if(prevState.isSubmitted != this.state.isSubmitted){\r\n            axios.get('http://localhost:5000/api/posts/movie/'+this.props.match.params.id).then(res => {\r\n                this.setState({\r\n                    isLoaded:true,\r\n                    posts: res.data\r\n                })\r\n            })\r\n        }\r\n    }\r\n    componentDidMount(){\r\n\r\n        // GET movie to be loaded (mrouter)\r\n        axios.get('http://localhost:5000/api/movies/movie/'+this.props.match.params.id).then(res => {\r\n            this.setState({\r\n                isLoaded: true,\r\n                movie: res.data\r\n            })\r\n        })\r\n\r\n        // GET Posts for the movie (prouter)\r\n        axios.get('http://localhost:5000/api/posts/movie/'+this.props.match.params.id).then(res => {\r\n            this.setState({\r\n                isLoaded:true,\r\n                posts: res.data\r\n            })\r\n        })\r\n\r\n    }\r\n    render(){\r\n        return(\r\n            <div style={{margin:\"130px\"}}>\r\n                <Jumbotron>\r\n                    <Container>\r\n                        <Row>\r\n                            <Col sm=\"4\">\r\n                                <img style={{padding:\"10px\", paddingTop:\"0px\", borderRadius:\"10%\"}} src = {this.state.movie.postersrc } alt = {this.state.movie.name} width = \"100%\" height = \"480px\" />\r\n                                <p style={{ opacity:\"0.7\", fontFamily:\"monospace\", textAlign:\"center\"}}>{this.state.movie.name}</p>\r\n                            </Col>\r\n                            <Col>\r\n                                <Container>\r\n                                    <h2 style={{padding:\"10px\"}}>{this.state.movie.name} ({this.state.movie.year})</h2>\r\n                                    <hr />\r\n                                    <div style={{padding:\"20px\", backgroundColor:\"pink\", borderRadius:\"10px\"}}>\r\n                                        <h4>Directed by {this.state.movie.director} | <span className=\"text-primary\">{this.state.movie.genre}</span></h4>\r\n                                        <div style={{display:\"grid\", gridTemplateColumns:\"auto auto\"}}>\r\n                                            <h5>{this.state.movie.cast}</h5>\r\n                                        </div>\r\n                                        <ReviewTag user={this.props.user}/>\r\n                                        <Form onSubmit={this.resetForm}>\r\n                                            <div style={{padding:\"10px\", justifyContent:\"right\", width:\"100%\"}}>\r\n                                                <label>\r\n                                                    <input type=\"radio\" value={1} onClick={(e)=>this.setState({stars: 1})} style={{display:\"none\"}} />\r\n                                                    <FaStar size={20} className=\"star\" style={{margin:\"10px\", marginBottom:\"auto\"}} \r\n                                                        color={ this.state.stars >= 1 ? 'orangered' : 'e4e5e9' } />\r\n                                                </label>\r\n                                                <label>\r\n                                                    <input type=\"radio\" value={1} onClick={(e)=>this.setState({stars: 2})} style={{display:\"none\"}} />\r\n                                                    <FaStar size={20} className=\"star\" style={{margin:\"10px\", marginBottom:\"auto\"}} \r\n                                                        color={ this.state.stars >= 2 ? 'orangered' : 'e4e5e9' } />\r\n                                                </label>\r\n                                                <label>\r\n                                                    <input type=\"radio\" value={1} onClick={(e)=>this.setState({stars: 3})} style={{display:\"none\"}} />\r\n                                                    <FaStar size={20} className=\"star\" style={{margin:\"10px\", marginBottom:\"auto\"}} \r\n                                                        color={ this.state.stars >= 3 ? 'orangered' : 'e4e5e9' } />\r\n                                                </label>\r\n                                                <label>\r\n                                                    <input type=\"radio\" value={1} onClick={(e)=>this.setState({stars: 4})} style={{display:\"none\"}} />\r\n                                                    <FaStar size={20} className=\"star\" style={{margin:\"10px\", marginBottom:\"auto\"}} \r\n                                                        color={ this.state.stars >= 4 ? 'orangered' : 'e4e5e9' } />\r\n                                                </label>\r\n                                                <label>\r\n                                                    <input type=\"radio\" value={1} onClick={(e)=>this.setState({stars: 5})} style={{display:\"none\"}} />\r\n                                                    <FaStar size={20} className=\"star\" style={{margin:\"10px\", marginBottom:\"auto\"}} \r\n                                                        color={ this.state.stars >= 5 ? 'orangered' : 'e4e5e9' } />\r\n                                                </label>\r\n                                            </div>\r\n                                            <Input type=\"text\" value={this.state.title} name=\"title\" placeholder=\"Title\" onChange={this.revChange} required/>\r\n                                            <Input type=\"textarea\" style={{width:\"100%\",height:\"150px\"}} placeholder='Write your review here ... ' value = {this.state.userReview} name=\"userReview\" onChange = {this.revChange} rows = {5} cols = {50} maxLength = {140} required/>\r\n                                            <br></br>\r\n                                            <Button onClick={this.revSubmit} className=\"btn mt-4 btn-success\">Publish!</Button>\r\n                                        </Form>\r\n                                    </div>\r\n                                </Container>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                    <div style={{ display:\"grid\", gridTemplateColumns:\"50% 50%\", paddingBottom:\"20px\", paddingTop:\"20px\", width:\"100%\"}}>\r\n                        <Posts items={this.state.posts} />\r\n                    </div>\r\n                </Jumbotron>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}